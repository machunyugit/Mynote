## 积硅步, 致千里

###常用的查看MongoDB状态的操作

1. 可以使用 `db.currentOp()` 查看正太进行的操作。

2. `db.killOp();` 

   ```html
   只要找到想要终止的操作，就可将该操作的opid作为参数，通过执行db.killOp();来终止该操作的执行
   db.killOp(64);
   ```

   并非所有的 操作都能被终止， 一般来讲，只有交出了锁的进程才能被终止，因此更新、查找、删除操作都可被终止。正在占用锁，或正在等待其他操作交出锁的操作则通常无法被终止。

3. stats 函数可用来显示一个集合的信息。

   ```html
   > db.stats();
   {
   	"db" : "fmmain",
   	"collections" : 14,
   	"views" : 0,
   	"objects" : 449408,
   	"avgObjSize" : 308.4313719381943,
   	"dataSize" : 138611526,
   	"storageSize" : 63733760,
   	"numExtents" : 0,
   	"indexes" : 20,
   	"indexSize" : 19464192,
   	"ok" : 1
   }
   ```

   * storageSize 即数据库正在使用的总空间大小
   * dataSize 是此数据库中的数据所占用的空间大小。注意，该值并不包含空闲列表中的空间，但包含了文档间的间隔。因此该值与storageSize的差异，应为被删除文档的大小。
   * __注意在一个繁忙的系统中列出数据库信息会非常慢，而且会阻碍其他操作。__

### 数据管理

#### 配置身份验证

##### 身份验证原理

admin（管理员）和 local（本地）是两个特殊的数据库，它们当中的用户可对任何数据库进行操作。这两个数据库中的用户可被看做是超级用户。经验证后，管理员用户可对任何数据库进行读写，同时能够执行某些只有管理员才能执行的命令。





