### 积硅步, 致千里 （选择优化的数据类型）

#### 原则

1. 更小的通常更好

   一般情况下，应该尽量使用可以正确存储数据的最小数据类型。更小的数据类型通常更快，因为它们占用更小的磁盘，内存和CPU缓存，并且处理时需要的CPU周期也更少。

2. 简单就好

   简单数据类型的操作需要更少的CPU周期。例如__整形比字符操作代价更低，因为字符集和校对规则使字符串比较比整型比较更复杂。__ 

   * 使用MySQL内建的类型而不是字符串来存储日期和时间

   * 应该用整型存储IP地址， 

     ```php
     $ip = '39.106.99.63';
     echo $intip = sprintf('%u',ip2long($ip)); //转换为无符号整型
     echo long2ip($intip);die;//将整型转换为ip
     ```

3. 尽量避免null

   * 如果查询中包含可为NULL的列，对于MySQL来说更难优化
   * 通常把可为NULL的列改为NOT NULL带来的性能提升比较小，所以（调优时）没有必要首先在现有schema中查找并修改掉这中情况，除非确定这会导致问题。__但是如果计划在列上建立索引，就应该尽量避免涉及成可为NULL的列__

   >DATETIME 和 TIMESTAMP 列都可以存储相同类型的数据，然而TIMESTAMP只是用DATETIME一半的存储空间，__并且会根据时区变化，具有特殊的自动更新能力__ 

#### 整数类型

1. `tinyint` ，`smallint` ，`mediumint` ，`int` ，`bigint` 分别占 8 ，16，24，32，64位存储空间，它们可以存储的值的范围从 `-2的(N-1)方  ～ 2的（N-1）方 `其中N为存储空间的位数。 

   __unsigned属性，表示不允许负值，可以使整数提高上线__

   * MySQL可以为整数类型指定宽度，例如Int（10），对大多数应用这是没有意义的：它不会限制值的合法范围，只是规定了MySQL的一些交互工具用来显示字符的个数。对于存储和计算来说，INT（1）和INT（20）是相同的。

#### 小数类型 ( float,double , decimal)

1. 对小数的计算需要额外的空间和计算开销，所以应该尽量只对小数进行精确计算时才使用`decimal`  --- 例如存储财务数据。__但是在数据量比较大的时候，可以考虑使用BIGINT代替DECIMAL__，将需要存储的货币单位根据小数的位数乘以相应的倍数即可。这样可以同时避免浮点存储计算不精确和`decimal` 精度计算代价高的问题

#### 字符串类型

