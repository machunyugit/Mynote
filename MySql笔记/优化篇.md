# 优化篇（2018-10-14）

## SQL优化

### 通过 show profile 分析 SQL

```mysql
#查看是否支持
select @@have_profilling;
#默认是关闭的  
select @@profilling;
#通过set在当前级别开启
set profiling = 1;
# 执行完sql通过这条命令查看 
show profiles;
# 根据 show profiles 获取到的哦 query_ID进一步查看详细信息
show profile for query 1;
```

## 记录

1. ` analyze table lh_admin`

   本语句用于分析和存储表的关键字分布，分析的结果将可以使得系统得准确的统计信息，使得SQL能够生成正确的执行计划。如果用户感觉实际执行计划并不是预期的执行计划，执行一次分析表可能会解决问题。在分析期间，使用一个读取锁定对表进行锁定。对于 MyISAM，BDB，InnoDB表有作用。

2. `check table lh_admin`

   检查表的作用是检查一个或多个表是否有错误。

   可以检查视图是否有错误。

3. `optimize table lh_admin`

   如果已经删除了表的一大部分，或者如果已经对含有可变长度行的表（含有 varchar，blob，text）进行了很多更改，则应使用 `optimize table` 命令来进行表优化。