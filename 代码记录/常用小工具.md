---
title: 常用小工具
date: 2017-07-23 20:23:48
tags:
---
#### 小工具

1. 检测ip格式是否正确

   ```php
   
   function check_ip ($mact)
   {
   	$a = '/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/';
   	$v = preg_match($a,$mact);
   	$arr = explode('.',$mact);
   	foreach($arr as $value) {
   		if ( ($v!=0) && $value < 255 && $value >=0) {
   			return 1;
   		} else {
   			return 0;
   		}
   	}
   }
   
   echo check_ip('127.0.9.0.1');
   //preg_match(); 
       //这个函数的返回值将是0次或者1次,原因是该函数在第一次匹配后将会停止搜索
   ```

2. 用来记录程序运行时间

   ```php
   function g($end=0) {
     static $start = 0;
     if(empty($end)) {
       $start = microtime(true); 
     }else{
       $end = microtime(true);
       $time = $end - $start;
       return number_format($time, 10, '.', '')." seconds";
     }
   }
   /*microtime() 当前 Unix 时间戳以及微秒数。
   如果调用时不带可选参数，本函数以 "msec sec" 的格式返回一个字符串('0.04800000 1500812200')，
   其中 sec 是自 Unix 纪元（0:00:00 January 1, 1970 GMT）起到现在的秒数，
   msec 是微秒部分。字符串的两部分都是以秒为单位返回的。 
   
   如果给出了参数并且其值等价于 TRUE ， microtime() 将返回一个浮点数('1500812333.562')。*/
   ```
