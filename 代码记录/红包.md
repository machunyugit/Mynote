# 红包算法实现

## 第一种

1. 规则

   假设有100元钱，分给十个人。那么第一个人获得红包大小怎么计算呢？100/10 = 10元。这是期望值。从0.01到20的区间中（其中20=10乘以2）随机抽取一个数，就是第一个人获得红包的大小。假设第一个人获得了15元，那么剩下的85元平均分给9个人，这九个人平均获得红包大小为9.4元，那么第二个人的红包大小均匀分布于0.01元到18.80元的区间中，依次类推。算法保证最后一个人至少抽到0.01元。

2. [参考网址](https://www.zhihu.com/question/22625187)

3. 代码实现

   ```php
   /**
    * 随机生成红包
    * @param  [type] $money  [总钱数]
    * @param  [type] $copies [份数]
    * @return [type]         [description]
    */
   function demo($money, $copies)
   {
       $expect = $money / $copies;
       $end = $expect * 200;
       $start = 1;
       if (!isset($returnArr)) {
           $returnArr = array();
       }
       if ($copies > 1) {
           //php 的 mt_rand 是闭区间
           $result = mt_rand($start, $end-1) / 100;
           --$copies;
           $money = $money - $result;
           $returnArr = demo($money, $copies);
           $returnArr[$copies] = $result;
       } else {
           $returnArr[$copies - 1] = round($money, 2);
       }
       return $returnArr;
   }
   $res = demo(10, 10);
   var_dump($res);
   $num = '';
   foreach ($res as $key => $value) {
       $num += $value;
   }
   echo $num;
   ```

   