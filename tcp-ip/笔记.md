## 网际层

### 寻址与发送

1. 地址解析协议(ARP)是另一种网际层协议，它维护一个表格，用于把IP地址映射到物理地址(MAC地址)。这个ARP表连接了IP地址与网卡物理地址。

### 路由式网络中，TCP/IP 软件使用如下策略在网络上发送数据。

1. 如果目的地址与源地址在同一个网段，源计算机就把数据包直接发送给目的计算机。IP地址被ARP解析为物理地址，数据被直接发送到目的网络适配器。
2. 如果目的地址与源地址不在一个网段上，就执行如下过程。
   * 直接将数据报发送到网关。网关是位于局域网网段上的一个设备，能够把数据报转发到其它网段。网关地址被ARP解析为物理地址，数据被发送到网关的网络适配器。
   * 数据报通过网关被路由到教高级别的网段，再次重复上述过程。如果目的地址在这个新网段里，数据就被发送到目的地。否则数据报就会被发送到另一个网关。
   * 数据报经过一系列网关被转发到目的网段，目的IP地址被ARP解析为物理地址，数据被发送到目的网络适配器。

### 网际层协议必须具有一下功能：

- 识别网络中所有的计算机；
- 提供一种方式来判断何时需要通过网关来传递消息；
- 提供一种与硬件无关的方式来识别目的网段，从而让数据报能够高效地经过路由器到达正确的网段；
- 提供一种方式把目标计算机的逻辑IP地址转化为物理地址，让数据能够传输给目的计算机的网络适配器。

### 网际协议（IP）

Ip协议提供了一种分层的、与硬件无关的寻址系统，具有在复杂的路由式网络中传递数据所需要的服务。TCP/IP网络上的每个网络适配器都有一个唯一的IP地址。

1. IP地址分为两个部分：
   * 网络ID
   * 主机ID
2. 