# 学习记录

## 函数

```c
int f(int x){   //定义
	return x + 3;
}

int main(){
	printf("%d\n",f(4));
	return 0;
}

int f(int);  //先声明
```

1. 在程序执行的顺序中，使用函数前要先声明或者定义函数。
2. 函数
   * 数学运算<math.h>
   * 输出和输入<stdio.h>

### 函数使用

```C
#include<stdio.h>
int max2(int, int);
int main()
{
	int a,b,max;
	printf("please enter the first integer:");
	scanf("%d",&a);
	printf("please enter the first integer:");
	scanf("%d",&b);
	printf("The maxinum is %d.\n", max2(a,b));
}

int max2(int a,int b)
{
	int max;
	if (a >= b){
		max = a;
	} else {
		max = b;
	}
	return max;
}
# 打印三角形
#include<stdio.h>
void print_stars(int i);
int main()
{
	int N,i;
	printf("N = ");
	scanf("%d",&N);
	for(i = 1; i <= N; i++){
		print_stars(i);
		printf("\n");
	}
	return 0;
}
void print_stars(int i){
	int j;
	for(j = 1; j <= i; j++){
		printf("*");
	}
	return ;
}
# 骰子
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
int main()
{
	srand(time(0));
	int i;
	for (i = 1; i <= 5; i++)
	{
		int dice = rand() % 6 + 1;
		printf("%d\n",dice);
	}
	return 0;
}
```

## 变量的可视范围

1. __局部变量__ ：属于某个{}，在{}外部不能使用此变量，在{}内部是可以使用。执行到普通局部变量定义语句，才会分配空间，离开{}，自动释放。普通局部变量不初始化，默认值为随机数。

2. 在编译阶段分配空间，只有整个程序结束才释放。普通全局变量只要定义了，任何地方都能使用，使用前需要声明所有的.c文件，只能定义一次普通全局变量，但是可以声明多次（外部链接）。

3. 全局变量

   * 声明在函数定义外
   * 因为容易造成名称污染，避免使用全局变量

   ```c
   #include<stdio.h>
   int i = 1;
   int main()
   {
   	printf("%d\n", i);
   	return 0;
   }
   
   ```

4. 局部变量

   * 声明在函数定义内

   * 大括号表示一个范围

     ```c
     int i = 1;
     int main()
     {
     	printf("%d\n", i);    	1
     	int i = 2;
     	printf("%d",i);     	2 
     	{
     		printf("%d",i); 	2
     		int i = 3;
     		printf("%d", i); 	3
     	}
     	printf("%d",i);      	2
     	return 0;
     }
     
     int main(){
     	int i = 3;
     	printf("%d\n", i);		3
     	if(i == 3){
     		i = i + 1;
     		int i = 6;
     		printf("%d\n", i);	6
     		i = i + 1;
     		printf("%d\n", i);	7
     	}
     	printf("%d\n", i);		4
     	if(i == 3){
     		printf("%d\n", i);
     	}
     	return 0;
     }
     ```

## 函数递归

```c
#include <stdio.h>
int f(int);
int main()
{
	printf("%d\n",f(0));
	return 0;
}

int f(int i){
	if(i == 2){
		return i;
	}
	return f(i+1);
}
```

## 数组

1. C 语言支持**数组**数据结构，它可以存储一个固定大小的相同类型元素的顺序集合。数组是用来存储一系列数据，但它往往被认为是一系列相同类型的变量 

   ```c
   #include <stdio.h>
   int main(){
   	int v[3] = {3,5,0};
   	int max = v[0];
   	if(v[1] > max){
   		max = v[1];
   	}
   	if(v[2] > max){
   		max = v[2];
   	}
   
   	printf("Max %d\n",max);
   	return 0;
   }
   ```

2. 数组的初始化

   ```c
   int counter[6] = {0,0,0,0,0,0};
   int counter[6] = {0};
   int counter[] = {0,0,0,0,0,0};
   int main()
   {
   	int v[4] = {3,5,0,7};
   	int i;
   	int max = v[0];
   	for (i = 1; i <=3; i++){
   		if(v[i] > max){
   			max = v[i];
   		}
   	}
   	printf("Max %d",max);
   }
   ```

3. 1~6的骰子练习

   ```c
   #include <stdio.h>
   #include <stdlib.h>
   #include <time.h>
   int main()
   {
   	srand(time(0));
   	int counter[6] = {0};
   	int i,j;
   	for (i = 1; i <= 6000; ++i) {
   		int dice = rand() % 6 + 1;
   		counter[dice-1]++;
   	}
   	for(j = 1; j <= 6; j++){
   		printf("%d : %d\n", j ,counter[j-1]);
   	}
   	return 0;
   }
   ```

4. 使用交换法生成随机数

   ```c
   #include <stdio.h>
   #include <stdlib.h>
   #include <time.h>
   
   int main()
   {
   	srand(time(0));
   	int i,n[10];
   	for(i=1;i<=10;i++){
   		n[i-1] = i;
   	}
   	for(i=1;i<=10;i++){
   		int j = rand() % (11-i) + i;
   		int t = n[i-1];
   		n[i-1] = n[j-1];
   		n[j-1] = t;
   		printf("%d",n[i-1]);
   	}
   	printf("\n");
   	return 0;
   }
   ```

5. 数组的排序

   ```c
   #include <stdio.h>
   int main()
   {
   	int v[5],i,j;
   	for(i=0;i<5;i++){
   		scanf("%d",&v[i]);
   	}
   	for(i=0;i<4;i++){
   		for(j=0;j<4-i;j++){
   			if(v[j] > v[j+1]){
   				int t = v[j+1];
   				v[j+1] = v[j];
   				v[j] = t;
   			}
   		}
   	}
   	for(i=0;i<5;i++){
   		printf("%d",v[i]);
   	}
   	return 0;
   }
   ```

6. 二维数组

   ```c
   int v[2][3] = {{1,2,3},{4,5,6}};
   ```

7. 数组的复制（不支持直接等号复制）

   ```c
   #include<stdio.h>
   void increase(int[3]);
   int main()
   {
   	int i,n[3] = {1,2,3};
   	increase(n);
   	for(i=0;i<3;i++){
   		printf("n[%d] = %d \n",i,n[i]);
   	}
   	return 0;
   }
   //这里是传的引用。
   void increase(int n[3]){
   	int i;
   	for (i=0; i < 3; i++)
   	{
   		n[i]++;
   	}
   }
   ```


## 查看数组的长度

### sizeof，不能在函数传递中使用这种方法

```c
int main()
{
	int v[3] = {1,2,3};
	printf("size of int:%zu\n",sizeof(v)/sizeof(v[0]));
	return 0;
}
```

### 用特定保留值表示数组长度

```c
#include<stdio.h>
int length(int[]);
int main()
{
	int v[4] = {1,2,3,-1};
	printf("%d\n",length(v));
	return 0;
}
int length(int v[])
{
	int i = 0;
	while(v[i] != -1){
		i++;
	}
	return i;
}
```

## 字符串

1. 初始化字符串

   * 字串是以 `\0` 表示结尾的字元数组

     ```c
     char strarr[] = {'h','e','l','l','o','\0'};
     ```

   * 字元数组可以用 “ 字串” 进行初始化，会自动加上 `\0` 字元

     ```c
     char str [] = "hello word";
     ```

2. <string.h>内提供各种处理字元阵列的函式来实现对字串的操作行为。

3. 字串是以 `'\0'` 表示结尾的字元数组的结尾。

   ```c
   # include <stdio.h>
   int str_len(char str[]){
   	int i = 0;
   	while(str[i] != '\0'){
   		i++;
   	}
   	return i;
   }
   int main()
   {
       //默认会在字符串末尾加 \0；
   	char str[] = "Hello world";
   	printf("length: %zu\n",sizeof(str));
   	printf("length: %zu\n",str_len(str));
   	return 0;
   }
   ```

4. 声明的字符串长度刚刚是字符串的长度，没有空间保存 `\0` 会是一个无效的语法

   ```c
   int main(){
       //没有空间保存你 \0；
       char str[11] = hello world;
       return 0;
   }
   ```

## 从键盘读取字符串

```c
# include <stdio.h>
void str_read(char str[]);
int main()
{
	char str[15];
	str_read(str);
	printf("%s\n",str);
	return 0;
}
void str_read(char str[]){
	int i = 0;
	while(1){
		scanf("%c",&str[i]);
		if(str[i] == '\n'){
			break;
		}
		i++;
	}
	str[i] = '\0';
}
```

## 指标对整数的加减运算

```C
# include <stdio.h>
int v[5];
&v[0] + 1 = &v[1]; //合法
&v[1] - 1 = &v[0]; //合法
&v[3] - &v[0] = 3; //合法
&v[1] + &v[0] //不合法
```

## 数组类型可转变为指标

```c
int v[5]; //声明一个有5个元素的int数组，占据5个int大小的内存
int * n;  //声明一个int 指标，占据1个int *大小的内存
n = &v[0]; 
         //数组了下可隐性转成数组第一个元素内存位址的指标
n = v;   //相当于 n = &v[0];

//示例代码
# include <stdio.h>
int main(){
	int v[5] = {1,2,3,4,5};
	int * n = v;
	int i;
	for(i=0; i < 5; i++){
		printf("%d\n",*(n+i));
	}
	return 0;
}
//指标的移动
int main()
{
	int v[5] = {1,2,3,4,5};
	int * n ;
	for(n = v; n != &v[5]; n++){
		printf("%d\n",*n);
	}
	return 0;
}
```

## 指标的下标运算

```c
int v[5];
int * n = y;
n[0] = 0; //a[b] 就是 * (a + b), n[0] 就是 * (n + 0);
```

## 字串字面常量的特殊性

```c
char strA[] = "test"; 
//可以修改 strA[0] = 'T';
//不能整个换掉  strA = "Test";
char * strB = "test"; 
//可隐形转成字元指标，
//不能修改           strB[0] = 'T',
//但是可以整个换掉   strB = "Test";
```

## const 修饰符

* 数据类型被const 修饰的变量在初始化之外不能再被赋值。

  ```c
  const int b = 5;
  ```

* 数组元素使用const 修饰符

  ```c
  const int b[3] = {5,6,7};
  ```

* 字串字面常量的特殊

  ```C
  char strA[] = "test";
  char * strB = "test";
  const char * strC = "test";
  
  strA[0] = "T"; // o
  strB[0] = "T"; // x
  strC[0] = "T"; // x
  
  strA = strB;   // char [] = char *          X
  strA = strC;   // char [] = const char *    X
  strB = strA;   // char *  = char []         O
  strB = strC;   // char *  = const char *    X
  strC = strA;   // const char * = char []    O
  strC = strB;   // const char * = char *     O
  ```

## 字串的复制

```c
# include <stdio.h>
# include <string.h>

int main(){
	char source[5] = "test";
	char destination[5];

	//深复制
	int i;
	for(i = 0; i < 5; i++){
		destination[i] = source[i];
	}
	printf("%s\n",destination);
	return 0;
}
```



