## go 圣经

## 可见性规则

Go 语言中，使用**大小写**来决定该常量、变量、类型、接口、结构或函数是否可以被外部包所调用。函数名首字母小写即为 private。函数名首字母大写即为 public。

## 程序结构

###  声明类型

1. 一个类型声明语句创建了一个新的类型名称。

   ```go
   type 类型名 底层类型
   ```

2. 类型声明语句一般出现在包一级，因此如果新创建的类型名字的首字符大写，则在**外部包**也可以使用。

 ## 包和文件

每个包都对应一个独立额名字空间。例如，在image包中的Decode函数和在unicode/utf16包中的 Decode函数是不同的。要在外部引用该函数，必须显式使用image.Decode或utf16.Decode形式访问。

## 作用域

1. 声明语句的作用域对应的是一个源代码的文本区域；它是一个编译时的属性。一个变量的生命周期是指程序运行时变量存在的有效时间段，在此时间区域内它可以被程序的其他部分引用；是一个运行时的概念。

2. 当编译器遇到一个名字引用时，如果它看起来像一个声明，它首先从最内层的词法域向全局的作用域查找。如果查找失败，则报告“未声明的名字”这样的错误。如果该名字在内部和外部的块分别声明过，则内部块的声明首先被找到。在这种情况下，内部声明屏蔽了外部同名的声明，让外部的声明的名字无法被访问：

   ```go
   package main
   
   import "fmt"
   var g = "g"
   
   func main(){
   	f := "f"
   	fmt.Println(f)	// 本地变量
   	fmt.Println(g)	// "g"; package-level var
   	fmt.Println(h)	// compile error: undefined: h
   }
   ```

3. 下面的例子同样有三个不同的x变量，每个声明在不同的词法域，一个在函数体词法域，一个在for隐式的初始化词法域，一个在for循环体词法域；只有两个块是显式创建的：

   ```go
   package main
   
   import "fmt"
   
   func main(){
   	x := "hello"
   	for _, x := range x {
   		x := x + 'A' - 'a'
   		fmt.Printf("%c",x) // "HELLO"
   	}
   }
   ```


