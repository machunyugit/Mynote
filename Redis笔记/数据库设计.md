#### 数据库设计

* 用集合存储领取的经纬度和发放的经纬度

  ```html
  用集合存储需要经纬度数据
    sadd lingqu 36.618611861467,116.94660964012
  用这个命令判断是否存在集合中
    sismember key member
    sismember lingqu 36.669275218621,116.96701623998
  用这个领取了删除对应的数据
    srem lingqu 36.669275218621,116.96701623998
  获取全部的坐标信息 前端展示
    smembers key
  ```

* 用列表存储红包的数据

  ```html
  userid:1:hongbao:1 10 20 30 40
  ```

* 字符串使用

  ```html
  获取红包发放的次数
  	incr hbcount
  设置经纬度和红包的对应关系
      set 36.669275218621,116.96701623998 userid:1:hongbao:1
  设置红包与优惠券的关系
      set userid:1:hongbao:1   id优惠券id
  ```

* 发红包

  * 要先去数据库插入广告记录 获取, 优惠券id

  * 执行redis操作

  * 将广告记录写入数据库中

    ```html
    id
    用户id                      发的用户id
    openid                      发的openid
    红包列表id
    红包个数
    红包金额
    优惠券金额
    优惠券有效时间
    广告语
    创建时间
    ```

* 领取红包

  * 将领取记录写入数据库

    ```html
    id
    领取的用户id
    发的用户id
    红包队列的id
    领取的金额
    是否领取  默认都是没有领取的0
    时间
    ```

  * 领取的优惠券的记录

    ```html
    id
    uid          领取的用户id
    广告id
    领取时间
    ```

    ​

  ​